
//console


//coord are allway elative to zero zero which is at the top pivot. See var offset
var prices = {kitWithCams: 49.00, camsOnly: 10, assembledWithCams:69, custom:10};
var country = "none selected";
var shippingCosts = {"Australia": "15.00", "Other": "24.00"};
var L = 180;
var d = 30;
var pageCX = 0;
var pageCY = 225;
var pageR = 50;
var screw = 5;//screw diameter
//var width = 300;
var screenHeight = (window.innerHeight > 0) ? window.innerHeight : screen.height;
//var screenHeight = window.innerHeight;
var screenWidth = (window.innerWidth > 0) ? window.innerWidth : screen.width;
var height = 300;
var scaler = (screenHeight-6)/height;
var width = (screen.width-6)/scaler;
var camCX = 0;
var camCY = 88;
var camRMax = 80; 
var camRMin = 56;
var hello = [[-28.752260397830014,199.40325497287523],[-28.752260397830014,199.94575045207958],[-29.837251356238696,202.65822784810126],[-30.922242314647377,206.45569620253164],[-32.5497287522604,210.79566003616637],[-34.17721518987342,216.22061482820976],[-35.80470162748644,222.1880650994575],[-37.9746835443038,228.6980108499096],[-39.059674502712475,233.03797468354432],[-40.14466546112116,236.8354430379747],[-41.22965641952984,239.54792043399638],[-41.77215189873418,241.71790235081374],[-41.77215189873418,242.2603978300181],[-41.22965641952984,241.17540687160943],[-39.059674502712475,236.29294755877035],[-37.9746835443038,232.49547920433997],[-36.34719710669078,228.6980108499096],[-34.17721518987342,226.52802893309223],[-32.00723327305606,224.35804701627487],[-28.20976491862568,223.81555153707052],[-26.039783001808317,224.35804701627487],[-24.4122965641953,225.44303797468356],[-23.869801084990954,227.61301989150093],[-24.954792043399635,230.3254972875226],[-26.039783001808317,232.49547920433997],[-27.124773960217,235.20795660036168],[-27.667269439421332,237.37793851717902],[-27.667269439421332,239.00542495479206],[-27.124773960217,240.63291139240508],[-25.497287522603983,242.2603978300181],[-22.784810126582272,243.34538878842676],[-18.987341772151893,242.80289330922244],[-15.732368896925863,241.17540687160943],[-11.392405063291136,239.00542495479206],[-7.594936708860757,235.750452079566],[-4.339963833634727,231.95298372513562],[-3.7974683544303787,229.24050632911394],[-4.339963833634727,228.15551537070525],[-5.424954792043394,227.61301989150093],[-6.509945750452076,227.61301989150093],[-8.137432188065105,228.15551537070525],[-9.222423146473773,229.24050632911394],[-11.392405063291136,231.4104882459313],[-13.019891500904166,233.58047016274864],[-13.019891500904166,235.750452079566],[-13.5623869801085,237.92043399638337],[-12.477396021699818,239.00542495479206],[-11.392405063291136,240.09041591320073],[-9.76491862567812,241.71790235081374],[-7.052441229656424,243.34538878842676],[-4.339963833634727,243.34538878842676],[0,241.71790235081374],[4.339963833634727,237.37793851717902],[8.137432188065105,230.86799276672696],[10.849909584086802,225.44303797468356],[13.5623869801085,218.39059674502712],[15.732368896925863,211.88065099457506],[16.817359855334544,208.08318264014468],[17.359855334538878,203.2007233273056],[17.359855334538878,200.48824593128393],[17.359855334538878,197.77576853526222],[16.817359855334544,196.69077757685352],[15.732368896925863,198.31826401446656],[14.104882459312833,203.2007233273056],[12.477396021699818,208.08318264014468],[10.849909584086802,212.96564195298373],[9.76491862567812,217.8481012658228],[8.679927667269439,224.90054249547921],[8.137432188065105,230.86799276672696],[7.594936708860757,234.66546112115734],[7.594936708860757,238.4629294755877],[8.679927667269439,240.09041591320073],[10.849909584086802,241.17540687160943],[14.104882459312833,241.17540687160943],[17.902350813743226,238.4629294755877],[20.614828209764923,234.66546112115734],[23.32730560578662,229.78300180831826],[25.497287522603983,223.81555153707052],[28.20976491862568,216.7631103074141],[29.837251356238696,210.25316455696202],[31.464737793851725,204.82820976491863],[31.464737793851725,200.48824593128393],[31.464737793851725,199.40325497287523],[30.922242314647377,198.31826401446656],[29.837251356238696,199.40325497287523],[27.124773960217,204.82820976491863],[26.039783001808317,208.08318264014468],[24.954792043399635,210.79566003616637],[23.869801084990954,214.05063291139243],[23.869801084990954,217.30560578661846],[22.784810126582286,221.10307414104884],[22.784810126582286,224.90054249547921],[22.24231464737794,229.78300180831826],[22.24231464737794,232.49547920433997],[22.784810126582286,236.29294755877035],[23.32730560578662,238.4629294755877],[24.4122965641953,241.17540687160943],[26.582278481012665,242.2603978300181],[29.294755877034362,239.54792043399638],[32.00723327305606,234.122965641953],[34.17721518987342,229.78300180831826],[36.347197106690786,227.07052441229658],[40.144665461121164,224.90054249547921],[42.31464737793853,224.90054249547921],[43.94213381555154,228.15551537070525],[44.48462929475589,231.4104882459313],[43.399638336347195,234.66546112115734],[43.399638336347195,235.20795660036168],[43.94213381555154,234.66546112115734],[43.94213381555154,231.95298372513562],[43.94213381555154,229.24050632911394],[42.85714285714285,227.07052441229658],[40.68716094032551,225.98553345388788],[37.43218806509945,226.52802893309223],[34.71971066907777,229.78300180831826],[33.092224231464726,232.49547920433997],[32.54972875226041,236.29294755877035],[33.092224231464726,238.4629294755877],[35.26220614828209,240.63291139240508],[38.51717902350815,240.63291139240508],[40.68716094032551,239.00542495479206],[42.85714285714285,235.750452079566],[43.94213381555154,233.03797468354432],[43.94213381555154,231.4104882459313],[43.399638336347195,232.49547920433997],[42.31464737793853,235.750452079566],[41.22965641952983,238.4629294755877],[39.602169981916816,242.2603978300181],[36.889692585895105,244.9728752260398],[33.092224231464726,246.6003616636528],[28.752260397830014,247.6853526220615],[25.497287522603983,247.6853526220615],[20.614828209764923,247.6853526220615],[16.817359855334544,248.2278481012658],[11.934900542495484,248.2278481012658],[7.594936708860757,248.2278481012658],[4.339963833634727,248.2278481012658],[1.0849909584086816,247.6853526220615],[-3.254972875226045,247.14285714285717],[-9.222423146473773,247.6853526220615],[-12.477396021699818,247.6853526220615],[-16.274864376130196,246.6003616636528],[-20.072332730560575,246.6003616636528],[-23.869801084990954,246.6003616636528],[-27.667269439421332,246.6003616636528],[-30.922242314647377,246.6003616636528],[-34.719710669077756,246.6003616636528],[-36.34719710669078,246.6003616636528],[-38.51717902350814,246.6003616636528],[-40.14466546112116,246.6003616636528],[-40.6871609403255,246.05786618444847],[-41.22965641952984,245.51537070524412],[-42.31464737793852,244.9728752260398],[-43.399638336347195,244.43037974683546],[-43.942133815551536,243.34538878842676],[-43.399638336347195,242.2603978300181],[-43.399638336347195,241.17540687160943],[-42.31464737793852,237.92043399638337],[-41.77215189873418,235.20795660036168],[-40.6871609403255,231.95298372513562],[-39.059674502712475,228.15551537070525],[-36.88969258589512,224.90054249547921],[-35.2622061482821,222.1880650994575],[-33.63471971066908,218.93309222423147],[-31.464737793851725,214.59312839059675],[-29.837251356238696,210.25316455696202],[-28.20976491862568,206.45569620253164],[-26.582278481012665,203.2007233273056],[-26.039783001808317,200.48824593128393],[-25.497287522603983,197.77576853526222],[-25.497287522603983,196.1482820976492],[-25.497287522603983,195.60578661844485],[-25.497287522603983,195.0632911392405],[-26.039783001808317,195.0632911392405],[-26.039783001808317,195.60578661844485]];
var loveYou = [[-45.56962025316456,237.92043399638337],[-44.48462929475588,236.29294755877035],[-43.399638336347195,233.03797468354432],[-42.31464737793852,230.86799276672696],[-41.22965641952984,227.07052441229658],[-39.059674502712475,222.1880650994575],[-37.9746835443038,218.93309222423147],[-36.88969258589512,215.1356238698011],[-35.80470162748644,210.79566003616637],[-35.2622061482821,208.625678119349],[-35.2622061482821,207.54068716094034],[-36.34719710669078,208.08318264014468],[-37.43218806509946,210.25316455696202],[-38.51717902350814,212.96564195298373],[-39.602169981916816,216.7631103074141],[-40.6871609403255,221.10307414104884],[-41.77215189873418,226.52802893309223],[-41.77215189873418,230.86799276672696],[-41.77215189873418,233.58047016274864],[-40.6871609403255,235.750452079566],[-39.059674502712475,236.29294755877035],[-36.34719710669078,234.122965641953],[-33.63471971066908,231.4104882459313],[-33.09222423146474,230.86799276672696],[-33.09222423146474,230.3254972875226],[-33.63471971066908,230.3254972875226],[-35.2622061482821,232.49547920433997],[-35.2622061482821,234.66546112115734],[-34.17721518987342,236.29294755877035],[-31.464737793851725,237.37793851717902],[-28.752260397830014,235.750452079566],[-27.124773960217,233.03797468354432],[-27.124773960217,230.3254972875226],[-28.752260397830014,228.6980108499096],[-30.379746835443044,228.6980108499096],[-32.00723327305606,229.24050632911394],[-32.00723327305606,231.4104882459313],[-30.922242314647377,232.49547920433997],[-28.752260397830014,233.03797468354432],[-26.039783001808317,233.03797468354432],[-23.32730560578662,231.4104882459313],[-21.699819168173605,229.78300180831826],[-21.699819168173605,228.6980108499096],[-21.157323688969257,229.24050632911394],[-20.614828209764923,230.86799276672696],[-20.072332730560575,234.122965641953],[-19.52983725135624,236.29294755877035],[-20.072332730560575,237.92043399638337],[-18.44484629294756,236.29294755877035],[-17.359855334538878,234.122965641953],[-15.732368896925863,231.95298372513562],[-15.189873417721515,230.3254972875226],[-15.189873417721515,229.78300180831826],[-14.647377938517181,229.78300180831826],[-13.019891500904166,230.3254972875226],[-10.307414104882454,231.4104882459313],[-7.594936708860757,231.4104882459313],[-5.424954792043394,229.78300180831826],[-4.88245931283906,228.15551537070525],[-5.424954792043394,227.07052441229658],[-6.509945750452076,226.52802893309223],[-8.679927667269439,228.15551537070525],[-9.76491862567812,230.3254972875226],[-10.307414104882454,231.95298372513562],[-10.307414104882454,234.122965641953],[-9.222423146473773,235.750452079566],[-8.137432188065105,236.8354430379747],[-5.967450271247742,237.37793851717902],[-3.7974683544303787,236.8354430379747],[0,234.66546112115734],[2.1699819168173633,231.4104882459313],[4.339963833634727,228.15551537070525],[5.967450271247742,225.44303797468356],[7.052441229656424,223.2730560578662],[7.594936708860757,222.73056057866185],[7.594936708860757,222.1880650994575],[5.424954792043394,224.90054249547921],[3.254972875226045,228.6980108499096],[2.712477396021697,231.4104882459313],[2.712477396021697,234.122965641953],[4.339963833634727,235.750452079566],[7.594936708860757,235.750452079566],[9.222423146473787,235.20795660036168],[12.477396021699818,231.95298372513562],[14.104882459312833,228.6980108499096],[14.647377938517181,225.44303797468356],[15.732368896925863,223.2730560578662],[15.732368896925863,222.1880650994575],[16.274864376130196,222.1880650994575],[16.274864376130196,222.73056057866185],[15.189873417721515,225.44303797468356],[13.019891500904166,229.78300180831826],[11.934900542495484,234.122965641953],[10.307414104882454,237.92043399638337],[9.222423146473787,241.71790235081374],[7.052441229656424,244.9728752260398],[4.88245931283906,247.6853526220615],[1.6274864376130154,248.2278481012658],[-0.5424954792043337,247.6853526220615],[-1.0849909584086816,244.9728752260398],[0,241.71790235081374],[2.712477396021697,240.09041591320073],[5.967450271247742,238.4629294755877],[9.222423146473787,237.92043399638337],[13.019891500904166,235.750452079566],[16.817359855334544,233.03797468354432],[19.52983725135624,231.4104882459313],[21.699819168173605,229.78300180831826],[22.24231464737794,228.6980108499096],[21.699819168173605,228.6980108499096],[19.52983725135624,229.78300180831826],[18.987341772151893,231.95298372513562],[18.987341772151893,234.122965641953],[20.072332730560575,235.750452079566],[22.24231464737794,236.29294755877035],[26.039783001808317,235.20795660036168],[28.20976491862568,233.03797468354432],[28.20976491862568,228.15551537070525],[27.124773960217,226.52802893309223],[24.954792043399635,227.07052441229658],[23.869801084990954,228.15551537070525],[23.32730560578662,229.24050632911394],[24.4122965641953,230.86799276672696],[26.039783001808317,231.95298372513562],[29.294755877034362,231.4104882459313],[32.54972875226041,230.86799276672696],[34.71971066907777,229.24050632911394],[36.889692585895105,228.15551537070525],[36.347197106690786,228.6980108499096],[34.71971066907777,230.3254972875226],[34.17721518987342,231.95298372513562],[34.17721518987342,233.58047016274864],[34.71971066907777,234.66546112115734],[35.80470162748644,236.29294755877035],[37.9746835443038,236.29294755877035],[40.144665461121164,235.20795660036168],[41.77215189873418,233.03797468354432],[42.85714285714285,230.3254972875226],[43.94213381555154,228.15551537070525],[43.94213381555154,227.61301989150093],[43.94213381555154,227.07052441229658],[43.94213381555154,227.61301989150093],[42.85714285714285,230.3254972875226],[42.31464737793853,232.49547920433997],[42.31464737793853,234.122965641953],[42.85714285714285,236.8354430379747],[43.399638336347195,237.37793851717902],[41.77215189873418,237.92043399638337],[39.05967450271247,237.37793851717902],[34.71971066907777,237.92043399638337],[29.837251356238696,238.4629294755877],[25.497287522603983,239.00542495479206],[22.24231464737794,239.00542495479206],[18.44484629294756,239.00542495479206],[15.732368896925863,239.00542495479206],[11.934900542495484,239.54792043399638],[7.594936708860757,239.00542495479206],[2.712477396021697,239.54792043399638],[-1.6274864376130154,240.09041591320073],[-5.967450271247742,240.09041591320073],[-10.849909584086802,240.09041591320073],[-16.817359855334544,241.17540687160943],[-21.157323688969257,240.63291139240508],[-27.124773960217,240.63291139240508],[-33.09222423146474,240.63291139240508],[-37.43218806509946,240.63291139240508],[-40.6871609403255,241.17540687160943],[-42.31464737793852,241.17540687160943],[-43.942133815551536,241.71790235081374],[-45.02712477396022,241.71790235081374],[-45.56962025316456,241.71790235081374],[-46.65461121157324,241.71790235081374]];
var happyBirthday = [[-29.294755877034362,204.2857142857143],[-27.124773960217,200.48824593128393],[-25.497287522603983,196.69077757685352],[-23.32730560578662,193.4358047016275],[-21.699819168173605,190.18083182640146],[-21.157323688969257,187.46835443037975],[-21.699819168173605,186.9258589511754],[-22.784810126582272,190.18083182640146],[-24.4122965641953,194.52079566003619],[-26.039783001808317,198.86075949367088],[-28.20976491862568,203.74321880650996],[-28.20976491862568,204.82820976491863],[-26.582278481012665,200.48824593128393],[-22.784810126582272,196.69077757685352],[-19.52983725135624,195.60578661844485],[-19.52983725135624,198.31826401446656],[-21.157323688969257,201.03074141048825],[-21.157323688969257,203.2007233273056],[-17.902350813743226,202.65822784810126],[-14.647377938517181,197.77576853526222],[-11.934900542495484,196.69077757685352],[-11.934900542495484,197.23327305605787],[-14.647377938517181,198.31826401446656],[-16.274864376130196,202.11573236889694],[-14.647377938517181,203.2007233273056],[-10.307414104882454,198.86075949367088],[-9.222423146473773,196.1482820976492],[-10.307414104882454,198.86075949367088],[-10.849909584086802,201.5732368896926],[-10.849909584086802,202.65822784810126],[-8.679927667269439,203.74321880650996],[-4.88245931283906,200.48824593128393],[-2.712477396021697,197.23327305605787],[-1.6274864376130154,195.60578661844485],[-1.6274864376130154,196.1482820976492],[-2.1699819168173633,197.77576853526222],[-3.254972875226045,200.48824593128393],[-4.88245931283906,203.74321880650996],[-6.509945750452076,208.625678119349],[-8.679927667269439,212.96564195298373],[-10.307414104882454,217.8481012658228],[-13.019891500904166,220.01808318264014],[-12.477396021699818,216.7631103074141],[-8.679927667269439,210.79566003616637],[-5.424954792043394,206.45569620253164],[-2.1699819168173633,201.03074141048825],[0.5424954792043337,197.23327305605787],[4.339963833634727,194.52079566003619],[5.424954792043394,196.1482820976492],[3.254972875226045,199.40325497287523],[-1.0849909584086816,201.5732368896926],[-2.712477396021697,201.03074141048825],[-1.0849909584086816,201.5732368896926],[2.712477396021697,201.5732368896926],[6.509945750452076,200.48824593128393],[9.76491862567812,197.23327305605787],[11.392405063291136,195.0632911392405],[11.392405063291136,194.52079566003619],[11.392405063291136,196.1482820976492],[9.222423146473787,199.94575045207958],[6.509945750452076,204.2857142857143],[3.7974683544303787,209.7106690777577],[2.1699819168173633,214.05063291139243],[0,218.39059674502712],[-1.6274864376130154,218.93309222423147],[-0.5424954792043337,215.67811934900544],[3.254972875226045,210.25316455696202],[7.052441229656424,204.82820976491863],[9.76491862567812,200.48824593128393],[12.477396021699818,197.23327305605787],[14.104882459312833,195.60578661844485],[16.817359855334544,195.0632911392405],[17.902350813743226,196.1482820976492],[14.647377938517181,201.03074141048825],[9.76491862567812,202.65822784810126],[9.222423146473787,201.03074141048825],[10.849909584086802,201.03074141048825],[14.104882459312833,202.65822784810126],[17.902350813743226,200.48824593128393],[20.614828209764923,197.23327305605787],[22.24231464737794,195.60578661844485],[22.784810126582286,195.60578661844485],[22.784810126582286,195.0632911392405],[22.24231464737794,195.60578661844485],[20.072332730560575,198.86075949367088],[19.52983725135624,201.03074141048825],[20.072332730560575,202.65822784810126],[23.32730560578662,202.11573236889694],[26.582278481012665,199.40325497287523],[28.20976491862568,196.1482820976492],[28.20976491862568,195.0632911392405],[28.20976491862568,195.60578661844485],[28.20976491862568,196.1482820976492],[27.124773960217,197.77576853526222],[26.039783001808317,199.94575045207958],[25.497287522603983,203.74321880650996],[25.497287522603983,208.08318264014468],[24.4122965641953,213.50813743218808],[21.699819168173605,218.93309222423147],[16.817359855334544,222.1880650994575],[8.679927667269439,224.90054249547921],[0,227.61301989150093],[-5.424954792043394,227.61301989150093],[-11.392405063291136,227.61301989150093],[-16.817359855334544,227.07052441229658],[-20.614828209764923,227.61301989150093],[-23.869801084990954,229.24050632911394],[-26.039783001808317,230.86799276672696],[-29.294755877034362,235.20795660036168],[-31.464737793851725,240.09041591320073],[-33.09222423146474,247.14285714285717],[-35.2622061482821,252.56781193490053],[-35.2622061482821,253.1103074141049],[-33.09222423146474,247.14285714285717],[-30.379746835443044,240.09041591320073],[-27.124773960217,234.122965641953],[-23.869801084990954,233.03797468354432],[-23.32730560578662,235.750452079566],[-27.124773960217,241.17540687160943],[-30.379746835443044,243.34538878842676],[-31.464737793851725,244.43037974683546],[-30.922242314647377,243.8878842676311],[-27.667269439421332,242.80289330922244],[-24.954792043399635,243.8878842676311],[-27.124773960217,247.14285714285717],[-30.379746835443044,249.85533453887888],[-34.17721518987342,252.56781193490053],[-35.2622061482821,253.1103074141049],[-34.17721518987342,253.1103074141049],[-29.837251356238696,250.94032549728752],[-23.869801084990954,246.6003616636528],[-21.157323688969257,243.8878842676311],[-21.699819168173605,244.43037974683546],[-23.32730560578662,246.05786618444847],[-24.4122965641953,248.2278481012658],[-24.954792043399635,250.3978300180832],[-21.699819168173605,250.3978300180832],[-18.44484629294756,247.14285714285717],[-15.732368896925863,243.8878842676311],[-15.732368896925863,243.34538878842676],[-16.817359855334544,244.9728752260398],[-18.987341772151893,248.77034358047018],[-19.52983725135624,249.85533453887888],[-17.902350813743226,246.05786618444847],[-16.274864376130196,243.8878842676311],[-14.647377938517181,244.43037974683546],[-13.5623869801085,244.9728752260398],[-13.019891500904166,244.9728752260398],[-9.76491862567812,244.43037974683546],[-6.509945750452076,240.09041591320073],[-2.712477396021697,234.66546112115734],[-1.0849909584086816,231.95298372513562],[0,230.86799276672696],[-1.6274864376130154,232.49547920433997],[-4.88245931283906,237.37793851717902],[-8.137432188065105,242.80289330922244],[-10.307414104882454,246.05786618444847],[-12.477396021699818,249.85533453887888],[-12.477396021699818,250.94032549728752],[-11.392405063291136,251.4828209764919],[-7.594936708860757,247.6853526220615],[-3.7974683544303787,242.80289330922244],[-3.254972875226045,241.17540687160943],[-7.594936708860757,241.71790235081374],[-11.934900542495484,243.34538878842676],[-12.477396021699818,244.43037974683546],[-10.849909584086802,244.9728752260398],[-7.594936708860757,244.43037974683546],[-3.254972875226045,242.2603978300181],[1.6274864376130154,238.4629294755877],[4.339963833634727,235.20795660036168],[6.509945750452076,233.58047016274864],[8.137432188065105,231.95298372513562],[7.052441229656424,233.03797468354432],[4.339963833634727,237.37793851717902],[0.5424954792043337,242.80289330922244],[-2.712477396021697,246.6003616636528],[-4.88245931283906,249.85533453887888],[-5.967450271247742,251.4828209764919],[-5.424954792043394,250.3978300180832],[-1.0849909584086816,245.51537070524412],[2.1699819168173633,243.34538878842676],[3.254972875226045,243.8878842676311],[3.254972875226045,245.51537070524412],[1.0849909584086816,248.2278481012658],[0,250.3978300180832],[2.712477396021697,250.3978300180832],[7.594936708860757,246.6003616636528],[9.76491862567812,245.51537070524412],[11.934900542495484,246.05786618444847],[13.5623869801085,245.51537070524412],[8.679927667269439,246.05786618444847],[7.052441229656424,248.2278481012658],[7.052441229656424,250.94032549728752],[9.222423146473787,252.0253164556962],[12.477396021699818,248.77034358047018],[16.817359855334544,242.2603978300181],[20.614828209764923,236.29294755877035],[21.699819168173605,233.58047016274864],[22.784810126582286,232.49547920433997],[20.072332730560575,234.66546112115734],[16.817359855334544,240.09041591320073],[14.647377938517181,243.8878842676311],[14.104882459312833,246.05786618444847],[14.104882459312833,249.3128390596745],[16.274864376130196,250.3978300180832],[19.52983725135624,247.6853526220615],[22.784810126582286,244.43037974683546],[24.954792043399635,243.8878842676311],[26.039783001808317,243.8878842676311],[23.869801084990954,244.43037974683546],[20.072332730560575,246.6003616636528],[19.52983725135624,249.3128390596745],[21.699819168173605,249.85533453887888],[25.497287522603983,246.6003616636528],[26.582278481012665,244.43037974683546],[27.124773960217,243.8878842676311],[25.497287522603983,246.05786618444847],[24.4122965641953,248.77034358047018],[24.954792043399635,250.3978300180832],[28.752260397830014,248.2278481012658],[30.922242314647377,245.51537070524412],[32.00723327305606,243.34538878842676],[32.54972875226041,242.80289330922244],[32.00723327305606,243.34538878842676],[30.379746835443044,246.6003616636528],[29.294755877034362,248.77034358047018],[29.837251356238696,250.3978300180832],[31.464737793851725,251.4828209764919],[33.634719710669074,250.94032549728752],[36.889692585895105,247.6853526220615],[38.51717902350815,244.9728752260398],[39.05967450271247,243.34538878842676],[38.51717902350815,243.34538878842676],[37.9746835443038,244.9728752260398],[36.889692585895105,247.6853526220615],[35.80470162748644,250.94032549728752],[34.71971066907777,254.19529837251355],[33.092224231464726,256.90777576853526],[31.464737793851725,260.1627486437613],[28.20976491862568,262.875226039783],[24.4122965641953,265.0452079566004],[20.614828209764923,267.75768535262205],[15.732368896925863,269.38517179023506],[9.76491862567812,271.55515370705245],[5.424954792043394,271.55515370705245],[-0.5424954792043337,272.0976491862568],[-4.88245931283906,271.55515370705245],[-9.222423146473773,270.47016274864376],[-13.019891500904166,269.38517179023506],[-17.359855334538878,268.84267631103074],[-20.072332730560575,267.2151898734177],[-23.32730560578662,265.0452079566004],[-26.039783001808317,262.3327305605787],[-29.294755877034362,261.24773960217],[-31.464737793851725,259.62025316455697],[-33.63471971066908,256.90777576853526],[-36.34719710669078,255.82278481012656],[-39.059674502712475,252.56781193490053],[-41.22965641952984,249.3128390596745],[-41.77215189873418,244.9728752260398],[-42.31464737793852,241.17540687160943],[-42.31464737793852,235.20795660036168],[-41.77215189873418,230.86799276672696],[-41.22965641952984,225.98553345388788],[-39.602169981916816,221.64556962025318],[-38.51717902350814,217.8481012658228],[-36.88969258589512,215.1356238698011],[-34.17721518987342,211.33815551537072],[-32.00723327305606,208.625678119349],[-30.922242314647377,207.54068716094034],[-29.837251356238696,205.91320072332732],[-28.752260397830014,205.37070524412297],[-28.20976491862568,204.82820976491863]];
var happyBday = [[-20.072332730560575,186.38336347197108],[-20.614828209764923,189.09584086799276],[-22.784810126582272,193.97830018083184],[-24.4122965641953,198.31826401446656],[-26.582278481012665,201.5732368896926],[-27.667269439421332,204.82820976491863],[-28.20976491862568,206.45569620253164],[-28.20976491862568,206.998191681736],[-28.20976491862568,206.45569620253164],[-26.039783001808317,202.11573236889694],[-23.869801084990954,198.86075949367088],[-21.157323688969257,197.77576853526222],[-20.072332730560575,197.77576853526222],[-18.987341772151893,198.86075949367088],[-18.987341772151893,201.03074141048825],[-20.072332730560575,203.74321880650996],[-20.614828209764923,205.37070524412297],[-20.072332730560575,206.45569620253164],[-17.359855334538878,205.91320072332732],[-14.647377938517181,203.2007233273056],[-12.477396021699818,201.03074141048825],[-10.849909584086802,199.94575045207958],[-8.137432188065105,199.94575045207958],[-7.594936708860757,199.94575045207958],[-8.137432188065105,199.94575045207958],[-11.934900542495484,201.03074141048825],[-14.104882459312833,202.65822784810126],[-14.647377938517181,204.82820976491863],[-13.019891500904166,206.45569620253164],[-10.849909584086802,206.998191681736],[-8.137432188065105,204.2857142857143],[-7.052441229656424,201.5732368896926],[-6.509945750452076,199.94575045207958],[-7.052441229656424,202.11573236889694],[-7.052441229656424,204.82820976491863],[-7.052441229656424,205.37070524412297],[-4.88245931283906,206.45569620253164],[-3.254972875226045,205.37070524412297],[-1.0849909584086816,202.65822784810126],[0.5424954792043337,199.94575045207958],[1.0849909584086816,198.31826401446656],[1.0849909584086816,198.86075949367088],[0.5424954792043337,201.03074141048825],[-1.0849909584086816,205.37070524412297],[-2.1699819168173633,209.7106690777577],[-3.7974683544303787,213.50813743218808],[-5.424954792043394,217.30560578661846],[-7.052441229656424,221.64556962025318],[-8.137432188065105,224.35804701627487],[-9.222423146473773,225.98553345388788],[-9.222423146473773,224.90054249547921],[-7.594936708860757,221.64556962025318],[-5.424954792043394,217.8481012658228],[-3.7974683544303787,212.42314647377938],[-1.0849909584086816,206.998191681736],[0.5424954792043337,202.65822784810126],[2.712477396021697,199.94575045207958],[5.424954792043394,198.86075949367088],[7.052441229656424,199.94575045207958],[7.594936708860757,203.2007233273056],[5.424954792043394,205.91320072332732],[1.6274864376130154,207.54068716094034],[-1.0849909584086816,207.54068716094034],[-1.6274864376130154,207.54068716094034],[-1.0849909584086816,207.54068716094034],[0.5424954792043337,207.54068716094034],[4.339963833634727,207.54068716094034],[7.052441229656424,206.45569620253164],[9.76491862567812,203.74321880650996],[11.392405063291136,201.5732368896926],[12.477396021699818,199.94575045207958],[13.019891500904166,199.40325497287523],[13.019891500904166,200.48824593128393],[11.392405063291136,204.2857142857143],[9.222423146473787,208.625678119349],[7.594936708860757,212.96564195298373],[5.967450271247742,218.39059674502712],[4.339963833634727,223.2730560578662],[3.254972875226045,225.44303797468356],[2.712477396021697,225.44303797468356],[4.339963833634727,221.10307414104884],[7.052441229656424,214.59312839059675],[9.222423146473787,209.16817359855335],[10.849909584086802,204.82820976491863],[13.5623869801085,201.5732368896926],[16.274864376130196,200.48824593128393],[18.44484629294756,201.5732368896926],[18.44484629294756,204.82820976491863],[15.732368896925863,207.54068716094034],[11.934900542495484,209.7106690777577],[9.222423146473787,209.7106690777577],[9.222423146473787,208.625678119349],[10.307414104882454,209.16817359855335],[12.477396021699818,210.25316455696202],[16.274864376130196,209.7106690777577],[18.987341772151893,207.54068716094034],[20.614828209764923,204.82820976491863],[22.24231464737794,202.11573236889694],[23.32730560578662,201.03074141048825],[22.784810126582286,202.65822784810126],[21.699819168173605,204.82820976491863],[21.157323688969257,206.45569620253164],[21.699819168173605,208.625678119349],[22.24231464737794,209.16817359855335],[24.954792043399635,208.625678119349],[27.124773960217,205.37070524412297],[28.20976491862568,202.65822784810126],[28.752260397830014,201.03074141048825],[28.752260397830014,200.48824593128393],[28.752260397830014,201.03074141048825],[28.20976491862568,204.2857142857143],[27.124773960217,208.08318264014468],[26.039783001808317,212.42314647377938],[24.954792043399635,216.7631103074141],[23.32730560578662,220.5605786618445],[20.614828209764923,224.90054249547921],[17.359855334538878,228.15551537070525],[11.934900542495484,230.3254972875226],[7.052441229656424,231.4104882459313],[1.6274864376130154,231.95298372513562],[-3.7974683544303787,231.4104882459313],[-6.509945750452076,230.86799276672696],[-9.76491862567812,230.3254972875226],[-13.019891500904166,231.4104882459313],[-16.817359855334544,234.66546112115734],[-18.44484629294756,238.4629294755877],[-19.52983725135624,243.34538878842676],[-20.614828209764923,248.2278481012658],[-21.699819168173605,252.56781193490053],[-22.784810126582272,256.36528028933094],[-23.869801084990954,258.5352622061483],[-23.869801084990954,259.62025316455697],[-23.32730560578662,257.99276672694396],[-21.157323688969257,252.0253164556962],[-18.987341772151893,246.05786618444847],[-16.274864376130196,242.80289330922244],[-13.019891500904166,241.17540687160943],[-10.307414104882454,242.80289330922244],[-11.934900542495484,245.51537070524412],[-16.817359855334544,248.2278481012658],[-18.987341772151893,249.85533453887888],[-17.359855334538878,248.77034358047018],[-13.019891500904166,248.77034358047018],[-11.392405063291136,250.3978300180832],[-11.934900542495484,253.65280289330923],[-16.274864376130196,256.90777576853526],[-18.987341772151893,257.99276672694396],[-21.699819168173605,258.5352622061483],[-20.072332730560575,257.99276672694396],[-17.359855334538878,256.90777576853526],[-13.5623869801085,255.28028933092224],[-8.679927667269439,253.1103074141049],[-5.424954792043394,252.0253164556962],[-3.254972875226045,251.4828209764919],[-2.1699819168173633,251.4828209764919],[-2.712477396021697,251.4828209764919],[-5.424954792043394,252.56781193490053],[-7.594936708860757,255.82278481012656],[-7.594936708860757,256.90777576853526],[-7.052441229656424,258.5352622061483],[-4.88245931283906,258.5352622061483],[-2.1699819168173633,254.73779385171792],[0.5424954792043337,249.85533453887888],[2.712477396021697,246.05786618444847],[3.7974683544303787,243.34538878842676],[4.339963833634727,242.80289330922244],[3.7974683544303787,244.9728752260398],[2.1699819168173633,247.6853526220615],[0,250.3978300180832],[-0.5424954792043337,253.65280289330923],[-0.5424954792043337,256.36528028933094],[1.0849909584086816,257.99276672694396],[4.88245931283906,255.28028933092224],[6.509945750452076,253.1103074141049],[9.222423146473787,251.4828209764919],[10.849909584086802,251.4828209764919],[11.392405063291136,251.4828209764919],[9.76491862567812,252.0253164556962],[6.509945750452076,254.19529837251355],[5.967450271247742,256.36528028933094],[5.967450271247742,257.45027124773964],[7.594936708860757,257.99276672694396],[10.307414104882454,255.82278481012656],[11.934900542495484,253.1103074141049],[11.934900542495484,251.4828209764919],[12.477396021699818,251.4828209764919],[11.934900542495484,253.65280289330923],[11.934900542495484,255.28028933092224],[12.477396021699818,256.90777576853526],[13.5623869801085,257.45027124773964],[16.274864376130196,255.82278481012656],[18.44484629294756,252.56781193490053],[19.52983725135624,250.94032549728752],[19.52983725135624,250.3978300180832],[19.52983725135624,250.94032549728752],[18.44484629294756,253.1103074141049],[17.902350813743226,254.73779385171792],[17.902350813743226,256.90777576853526],[17.902350813743226,257.45027124773964],[20.072332730560575,257.99276672694396],[22.784810126582286,256.90777576853526],[24.954792043399635,253.65280289330923],[26.039783001808317,250.94032549728752],[26.039783001808317,249.85533453887888],[26.582278481012665,248.77034358047018],[26.039783001808317,249.85533453887888],[25.497287522603983,252.0253164556962],[24.954792043399635,255.28028933092224],[24.4122965641953,257.99276672694396],[23.32730560578662,260.1627486437613],[22.24231464737794,262.875226039783],[21.157323688969257,265.0452079566004],[19.52983725135624,267.2151898734177],[16.817359855334544,268.84267631103074],[13.5623869801085,271.01265822784814],[9.76491862567812,272.0976491862568],[6.509945750452076,273.18264014466547],[2.712477396021697,273.7251356238698],[-1.0849909584086816,273.18264014466547],[-3.7974683544303787,272.0976491862568],[-6.509945750452076,271.55515370705245],[-9.76491862567812,271.01265822784814],[-13.019891500904166,268.84267631103074],[-16.274864376130196,267.75768535262205],[-19.52983725135624,266.6726943942134],[-21.699819168173605,264.502712477396],[-24.4122965641953,262.875226039783],[-28.20976491862568,260.70524412296567],[-29.837251356238696,259.07775768535265],[-32.00723327305606,256.36528028933094],[-32.5497287522604,254.19529837251355],[-33.63471971066908,251.4828209764919],[-35.2622061482821,249.3128390596745],[-35.80470162748644,246.05786618444847],[-36.34719710669078,242.2603978300181],[-36.34719710669078,239.00542495479206],[-36.34719710669078,235.750452079566],[-36.34719710669078,232.49547920433997],[-36.34719710669078,228.6980108499096],[-35.80470162748644,224.35804701627487],[-35.2622061482821,222.1880650994575],[-34.17721518987342,218.93309222423147],[-33.09222423146474,215.67811934900544],[-31.464737793851725,212.42314647377938],[-30.379746835443044,210.25316455696202],[-29.294755877034362,208.625678119349],[-28.752260397830014,207.54068716094034],[-27.667269439421332,205.37070524412297],[-27.124773960217,203.2007233273056],[-26.582278481012665,201.5732368896926],[-25.497287522603983,198.86075949367088],[-24.4122965641953,196.1482820976492],[-23.32730560578662,194.52079566003619],[-22.24231464737794,192.35081374321882],[-21.699819168173605,191.26582278481013],[-21.157323688969257,189.6383363471971],[-21.157323688969257,188.55334538878844],[-20.614828209764923,187.46835443037975],[-20.072332730560575,186.9258589511754]];
var dadHeart = [[-32.00723327305606,223.81555153707052],[-30.922242314647377,220.01808318264014],[-29.294755877034362,215.67811934900544],[-27.667269439421332,211.88065099457506],[-26.582278481012665,208.08318264014468],[-26.039783001808317,205.37070524412297],[-26.039783001808317,204.82820976491863],[-25.497287522603983,204.2857142857143],[-21.699819168173605,204.2857142857143],[-18.44484629294756,206.998191681736],[-17.359855334538878,210.79566003616637],[-17.359855334538878,214.05063291139243],[-18.44484629294756,217.30560578661846],[-20.614828209764923,219.47558770343582],[-23.32730560578662,221.10307414104884],[-26.582278481012665,222.73056057866185],[-28.752260397830014,223.81555153707052],[-30.379746835443044,223.81555153707052],[-30.922242314647377,224.35804701627487],[-28.752260397830014,223.81555153707052],[-26.039783001808317,223.2730560578662],[-20.614828209764923,221.10307414104884],[-15.732368896925863,220.01808318264014],[-12.477396021699818,218.93309222423147],[-9.222423146473773,218.39059674502712],[-4.88245931283906,217.30560578661846],[-1.6274864376130154,217.30560578661846],[0.5424954792043337,217.30560578661846],[-3.254972875226045,217.8481012658228],[-7.052441229656424,218.93309222423147],[-8.679927667269439,221.10307414104884],[-8.137432188065105,222.73056057866185],[-5.424954792043394,223.81555153707052],[-2.712477396021697,223.2730560578662],[-0.5424954792043337,220.5605786618445],[1.0849909584086816,218.39059674502712],[1.0849909584086816,217.30560578661846],[0.5424954792043337,218.93309222423147],[0,221.10307414104884],[1.6274864376130154,222.73056057866185],[4.339963833634727,223.81555153707052],[7.594936708860757,223.2730560578662],[10.849909584086802,221.10307414104884],[15.189873417721515,218.39059674502712],[18.44484629294756,217.8481012658228],[22.24231464737794,217.8481012658228],[23.869801084990954,218.93309222423147],[23.32730560578662,218.39059674502712],[19.52983725135624,216.7631103074141],[16.274864376130196,216.22061482820976],[12.477396021699818,218.93309222423147],[11.934900542495484,220.5605786618445],[13.019891500904166,222.73056057866185],[16.274864376130196,223.81555153707052],[20.072332730560575,223.81555153707052],[23.32730560578662,221.64556962025318],[25.497287522603983,216.22061482820976],[27.124773960217,210.79566003616637],[28.20976491862568,207.54068716094034],[29.294755877034362,203.74321880650996],[30.379746835443044,201.5732368896926],[30.379746835443044,201.03074141048825],[29.837251356238696,201.03074141048825],[28.20976491862568,203.74321880650996],[26.039783001808317,208.08318264014468],[24.954792043399635,212.96564195298373],[24.4122965641953,216.22061482820976],[24.4122965641953,218.93309222423147],[24.954792043399635,220.5605786618445],[26.039783001808317,222.1880650994575],[28.20976491862568,223.2730560578662],[30.379746835443044,223.81555153707052],[32.00723327305606,223.81555153707052],[33.634719710669074,223.81555153707052],[35.80470162748644,220.5605786618445],[37.43218806509945,214.05063291139243],[37.9746835443038,208.625678119349],[36.889692585895105,203.2007233273056],[34.17721518987342,197.23327305605787],[31.464737793851725,193.4358047016275],[27.124773960217,190.7233273056058],[23.32730560578662,188.55334538878844],[19.52983725135624,186.9258589511754],[15.189873417721515,186.9258589511754],[9.76491862567812,189.09584086799276],[7.052441229656424,192.35081374321882],[4.339963833634727,195.0632911392405],[2.712477396021697,198.31826401446656],[1.6274864376130154,201.03074141048825],[1.0849909584086816,201.5732368896926],[1.0849909584086816,199.94575045207958],[-0.5424954792043337,196.69077757685352],[-2.712477396021697,194.52079566003619],[-5.967450271247742,191.80831826401447],[-8.679927667269439,190.18083182640146],[-11.934900542495484,189.09584086799276],[-15.732368896925863,188.55334538878844],[-18.987341772151893,188.55334538878844],[-22.784810126582272,189.09584086799276],[-26.582278481012665,189.6383363471971],[-29.294755877034362,190.7233273056058],[-32.00723327305606,192.35081374321882],[-34.17721518987342,194.52079566003619],[-36.34719710669078,197.77576853526222],[-38.51717902350814,202.11573236889694],[-39.602169981916816,207.54068716094034],[-40.14466546112116,212.96564195298373],[-40.14466546112116,218.39059674502712],[-39.059674502712475,222.73056057866185],[-37.9746835443038,228.15551537070525],[-35.2622061482821,233.58047016274864],[-32.00723327305606,238.4629294755877],[-28.20976491862568,242.80289330922244],[-23.869801084990954,244.9728752260398],[-19.52983725135624,247.14285714285717],[-14.104882459312833,250.94032549728752],[-9.76491862567812,253.1103074141049],[-5.424954792043394,256.90777576853526],[-2.712477396021697,260.1627486437613],[0.5424954792043337,265.0452079566004],[1.0849909584086816,267.2151898734177],[1.0849909584086816,268.84267631103074],[1.6274864376130154,268.84267631103074],[2.1699819168173633,266.6726943942134],[3.7974683544303787,263.4177215189874],[5.424954792043394,261.24773960217],[8.137432188065105,259.07775768535265],[10.849909584086802,256.36528028933094],[15.189873417721515,254.19529837251355],[18.44484629294756,251.4828209764919],[22.784810126582286,246.6003616636528],[26.039783001808317,242.2603978300181],[28.752260397830014,238.4629294755877],[30.922242314647377,234.122965641953],[32.54972875226041,230.3254972875226],[33.092224231464726,227.61301989150093],[34.17721518987342,224.90054249547921],[34.17721518987342,223.81555153707052],[34.17721518987342,223.2730560578662],[34.17721518987342,222.73056057866185],[31.464737793851725,223.2730560578662],[27.667269439421332,223.81555153707052],[24.4122965641953,224.35804701627487],[20.614828209764923,224.90054249547921],[17.902350813743226,225.44303797468356],[14.647377938517181,225.44303797468356],[11.392405063291136,225.44303797468356],[8.137432188065105,225.98553345388788],[4.339963833634727,225.98553345388788],[1.0849909584086816,225.44303797468356],[-1.6274864376130154,225.98553345388788],[-4.339963833634727,225.98553345388788],[-7.052441229656424,225.98553345388788],[-9.76491862567812,225.98553345388788],[-12.477396021699818,225.98553345388788],[-15.732368896925863,226.52802893309223],[-18.987341772151893,225.98553345388788],[-20.614828209764923,225.44303797468356],[-23.32730560578662,224.90054249547921],[-25.497287522603983,224.35804701627487],[-27.667269439421332,224.35804701627487],[-28.752260397830014,224.35804701627487],[-29.837251356238696,224.35804701627487],[-30.922242314647377,224.35804701627487],[-31.464737793851725,224.35804701627487],[-32.5497287522604,224.90054249547921],[-33.09222423146474,224.90054249547921]]; 
var mumHeart = [[-33.63471971066908,234.122965641953],[-33.63471971066908,233.58047016274864],[-33.09222423146474,230.3254972875226],[-33.09222423146474,226.52802893309223],[-33.09222423146474,221.64556962025318],[-32.5497287522604,218.39059674502712],[-32.00723327305606,215.67811934900544],[-32.00723327305606,210.25316455696202],[-31.464737793851725,208.08318264014468],[-31.464737793851725,206.45569620253164],[-30.379746835443044,208.08318264014468],[-28.752260397830014,210.25316455696202],[-27.667269439421332,211.33815551537072],[-26.039783001808317,213.50813743218808],[-24.4122965641953,215.1356238698011],[-23.32730560578662,216.7631103074141],[-22.784810126582272,217.30560578661846],[-22.24231464737794,217.30560578661846],[-21.157323688969257,215.1356238698011],[-20.072332730560575,213.50813743218808],[-18.987341772151893,211.33815551537072],[-18.44484629294756,209.7106690777577],[-17.359855334538878,208.08318264014468],[-16.817359855334544,206.998191681736],[-16.274864376130196,206.45569620253164],[-15.732368896925863,206.998191681736],[-15.732368896925863,210.25316455696202],[-15.189873417721515,214.05063291139243],[-15.189873417721515,217.8481012658228],[-14.647377938517181,221.10307414104884],[-14.104882459312833,224.90054249547921],[-13.5623869801085,228.15551537070525],[-13.019891500904166,230.3254972875226],[-12.477396021699818,231.4104882459313],[-12.477396021699818,231.95298372513562],[-10.849909584086802,231.95298372513562],[-8.679927667269439,232.49547920433997],[-7.052441229656424,231.95298372513562],[-6.509945750452076,229.24050632911394],[-5.967450271247742,226.52802893309223],[-5.424954792043394,222.73056057866185],[-5.424954792043394,218.93309222423147],[-4.88245931283906,215.67811934900544],[-4.339963833634727,214.59312839059675],[-4.339963833634727,216.22061482820976],[-4.339963833634727,220.01808318264014],[-4.339963833634727,223.2730560578662],[-4.339963833634727,226.52802893309223],[-3.254972875226045,228.6980108499096],[-1.6274864376130154,230.3254972875226],[1.0849909584086816,230.86799276672696],[3.7974683544303787,229.24050632911394],[5.967450271247742,224.90054249547921],[6.509945750452076,221.10307414104884],[7.052441229656424,218.93309222423147],[7.052441229656424,215.67811934900544],[7.594936708860757,214.59312839059675],[7.594936708860757,215.1356238698011],[7.052441229656424,218.93309222423147],[7.052441229656424,222.73056057866185],[7.052441229656424,225.44303797468356],[7.594936708860757,227.61301989150093],[8.679927667269439,229.24050632911394],[9.222423146473787,229.78300180831826],[9.76491862567812,230.3254972875226],[13.019891500904166,230.3254972875226],[15.189873417721515,230.3254972875226],[15.732368896925863,230.3254972875226],[15.732368896925863,229.78300180831826],[16.274864376130196,225.44303797468356],[16.817359855334544,220.5605786618445],[17.359855334538878,217.30560578661846],[17.902350813743226,214.05063291139243],[17.902350813743226,212.96564195298373],[18.44484629294756,212.96564195298373],[18.987341772151893,213.50813743218808],[20.072332730560575,216.22061482820976],[21.699819168173605,219.47558770343582],[22.784810126582286,221.10307414104884],[23.32730560578662,222.1880650994575],[23.869801084990954,222.73056057866185],[24.4122965641953,221.64556962025318],[26.039783001808317,218.93309222423147],[27.667269439421332,216.7631103074141],[28.752260397830014,214.59312839059675],[29.837251356238696,211.33815551537072],[30.379746835443044,211.33815551537072],[30.922242314647377,211.33815551537072],[31.464737793851725,214.59312839059675],[32.00723327305606,217.30560578661846],[32.54972875226041,221.10307414104884],[33.092224231464726,224.90054249547921],[33.634719710669074,227.61301989150093],[34.17721518987342,229.24050632911394],[34.17721518987342,230.3254972875226],[34.71971066907777,230.3254972875226],[35.26220614828209,230.3254972875226],[36.889692585895105,230.3254972875226],[38.51717902350815,230.3254972875226],[39.602169981916816,228.6980108499096],[41.22965641952983,224.35804701627487],[42.31464737793853,221.10307414104884],[42.31464737793853,217.30560578661846],[42.31464737793853,212.96564195298373],[41.77215189873418,208.08318264014468],[40.144665461121164,203.74321880650996],[36.347197106690786,199.40325497287523],[32.00723327305606,194.52079566003619],[27.124773960217,191.26582278481013],[21.699819168173605,189.09584086799276],[17.359855334538878,187.46835443037975],[13.5623869801085,187.46835443037975],[9.222423146473787,188.55334538878844],[7.052441229656424,190.7233273056058],[5.424954792043394,192.35081374321882],[2.712477396021697,194.52079566003619],[1.0849909584086816,196.69077757685352],[0,199.40325497287523],[-0.5424954792043337,200.48824593128393],[-1.0849909584086816,201.03074141048825],[-1.6274864376130154,201.03074141048825],[-3.254972875226045,198.86075949367088],[-4.88245931283906,196.1482820976492],[-7.052441229656424,194.52079566003619],[-9.76491862567812,192.35081374321882],[-13.019891500904166,190.18083182640146],[-15.732368896925863,189.09584086799276],[-18.987341772151893,188.55334538878844],[-21.699819168173605,188.55334538878844],[-25.497287522603983,189.6383363471971],[-28.752260397830014,190.7233273056058],[-31.464737793851725,192.35081374321882],[-33.09222423146474,194.52079566003619],[-35.80470162748644,197.77576853526222],[-37.9746835443038,200.48824593128393],[-39.059674502712475,203.2007233273056],[-40.14466546112116,206.45569620253164],[-40.6871609403255,210.79566003616637],[-40.6871609403255,215.1356238698011],[-40.6871609403255,218.93309222423147],[-39.602169981916816,222.73056057866185],[-37.9746835443038,226.52802893309223],[-36.88969258589512,229.24050632911394],[-35.2622061482821,231.95298372513562],[-33.09222423146474,234.66546112115734],[-30.379746835443044,238.4629294755877],[-27.667269439421332,241.71790235081374],[-24.954792043399635,244.9728752260398],[-21.157323688969257,248.2278481012658],[-18.44484629294756,250.94032549728752],[-15.732368896925863,252.0253164556962],[-11.934900542495484,254.73779385171792],[-8.137432188065105,257.45027124773964],[-5.424954792043394,259.07775768535265],[-3.254972875226045,260.70524412296567],[-0.5424954792043337,263.9602169981917],[1.6274864376130154,266.6726943942134],[2.712477396021697,267.75768535262205],[3.254972875226045,267.75768535262205],[3.7974683544303787,267.75768535262205],[4.88245931283906,266.6726943942134],[6.509945750452076,263.4177215189874],[8.137432188065105,262.3327305605787],[10.307414104882454,260.1627486437613],[14.104882459312833,257.45027124773964],[18.44484629294756,254.19529837251355],[21.699819168173605,251.4828209764919],[25.497287522603983,249.3128390596745],[29.294755877034362,246.6003616636528],[32.54972875226041,242.80289330922244],[35.26220614828209,239.00542495479206],[36.889692585895105,236.8354430379747],[37.9746835443038,233.03797468354432],[39.05967450271247,230.86799276672696],[39.602169981916816,230.3254972875226],[39.602169981916816,229.78300180831826],[36.889692585895105,229.78300180831826],[32.54972875226041,230.3254972875226],[28.20976491862568,230.86799276672696],[24.4122965641953,231.4104882459313],[20.072332730560575,231.95298372513562],[16.817359855334544,231.95298372513562],[13.019891500904166,232.49547920433997],[9.76491862567812,232.49547920433997],[6.509945750452076,232.49547920433997],[3.7974683544303787,233.58047016274864],[-0.5424954792043337,233.58047016274864],[-3.7974683544303787,233.58047016274864],[-7.052441229656424,233.03797468354432],[-11.392405063291136,233.58047016274864],[-16.274864376130196,233.03797468354432],[-18.987341772151893,233.58047016274864],[-22.784810126582272,233.58047016274864],[-24.954792043399635,233.58047016274864],[-26.582278481012665,233.58047016274864],[-28.752260397830014,234.122965641953],[-30.922242314647377,234.122965641953],[-32.00723327305606,234.122965641953],[-33.09222423146474,233.58047016274864],[-33.63471971066908,233.58047016274864]];
var merryXmas = [[-29.294755877034362,214.59312839059675],[-28.752260397830014,215.1356238698011],[-28.752260397830014,214.59312839059675],[-28.752260397830014,210.79566003616637],[-27.667269439421332,205.37070524412297],[-27.124773960217,202.11573236889694],[-26.582278481012665,199.94575045207958],[-26.039783001808317,199.40325497287523],[-24.4122965641953,202.65822784810126],[-22.784810126582272,205.91320072332732],[-22.24231464737794,208.08318264014468],[-20.614828209764923,206.45569620253164],[-18.987341772151893,203.74321880650996],[-17.359855334538878,200.48824593128393],[-15.732368896925863,198.86075949367088],[-15.189873417721515,198.86075949367088],[-14.647377938517181,202.11573236889694],[-14.647377938517181,206.45569620253164],[-15.189873417721515,209.7106690777577],[-15.189873417721515,211.88065099457506],[-15.189873417721515,212.96564195298373],[-14.647377938517181,213.50813743218808],[-13.019891500904166,214.05063291139243],[-9.76491862567812,213.50813743218808],[-6.509945750452076,211.88065099457506],[-3.7974683544303787,209.7106690777577],[-1.6274864376130154,206.998191681736],[-1.0849909584086816,205.37070524412297],[-2.1699819168173633,204.82820976491863],[-3.7974683544303787,205.91320072332732],[-5.967450271247742,208.08318264014468],[-5.967450271247742,209.7106690777577],[-5.424954792043394,211.33815551537072],[-3.7974683544303787,212.42314647377938],[-1.0849909584086816,213.50813743218808],[1.0849909584086816,212.96564195298373],[3.254972875226045,209.7106690777577],[4.339963833634727,206.998191681736],[4.88245931283906,204.82820976491863],[4.88245931283906,203.74321880650996],[4.88245931283906,205.37070524412297],[4.339963833634727,209.7106690777577],[4.339963833634727,212.42314647377938],[3.7974683544303787,209.16817359855335],[4.88245931283906,206.998191681736],[6.509945750452076,205.37070524412297],[8.679927667269439,204.2857142857143],[11.934900542495484,204.82820976491863],[14.647377938517181,204.2857142857143],[15.732368896925863,202.65822784810126],[15.732368896925863,202.11573236889694],[15.732368896925863,203.74321880650996],[15.732368896925863,207.54068716094034],[15.732368896925863,211.33815551537072],[15.189873417721515,213.50813743218808],[15.189873417721515,209.7106690777577],[16.817359855334544,205.37070524412297],[17.902350813743226,204.2857142857143],[20.614828209764923,204.82820976491863],[22.784810126582286,204.2857142857143],[24.954792043399635,202.11573236889694],[22.784810126582286,206.998191681736],[22.784810126582286,209.7106690777577],[22.784810126582286,212.42314647377938],[24.4122965641953,213.50813743218808],[27.667269439421332,211.88065099457506],[30.379746835443044,207.54068716094034],[31.464737793851725,204.82820976491863],[32.54972875226041,202.11573236889694],[32.54972875226041,201.5732368896926],[32.00723327305606,202.65822784810126],[31.464737793851725,206.45569620253164],[31.464737793851725,210.79566003616637],[31.464737793851725,214.59312839059675],[31.464737793851725,217.8481012658228],[29.837251356238696,220.5605786618445],[24.954792043399635,223.2730560578662],[20.072332730560575,223.81555153707052],[13.019891500904166,224.90054249547921],[6.509945750452076,224.90054249547921],[0,224.90054249547921],[-5.967450271247742,226.52802893309223],[-10.307414104882454,227.07052441229658],[-15.732368896925863,227.61301989150093],[-18.44484629294756,228.15551537070525],[-19.52983725135624,228.6980108499096],[-19.52983725135624,229.24050632911394],[-19.52983725135624,229.78300180831826],[-18.987341772151893,230.3254972875226],[-18.44484629294756,231.4104882459313],[-16.274864376130196,234.122965641953],[-13.5623869801085,238.4629294755877],[-10.307414104882454,242.2603978300181],[-7.052441229656424,245.51537070524412],[-5.424954792043394,247.6853526220615],[-8.679927667269439,247.14285714285717],[-13.5623869801085,247.14285714285717],[-17.902350813743226,247.14285714285717],[-20.072332730560575,247.14285714285717],[-22.24231464737794,247.14285714285717],[-22.784810126582272,247.14285714285717],[-21.699819168173605,246.6003616636528],[-17.902350813743226,243.8878842676311],[-14.104882459312833,240.63291139240508],[-10.307414104882454,237.37793851717902],[-6.509945750452076,235.20795660036168],[-3.7974683544303787,233.03797468354432],[-1.6274864376130154,231.4104882459313],[0,230.3254972875226],[0.5424954792043337,230.3254972875226],[0.5424954792043337,231.4104882459313],[0,234.66546112115734],[0,239.54792043399638],[0,243.8878842676311],[-0.5424954792043337,245.51537070524412],[-0.5424954792043337,246.6003616636528],[0.5424954792043337,241.71790235081374],[2.1699819168173633,237.37793851717902],[4.88245931283906,235.750452079566],[6.509945750452076,237.37793851717902],[6.509945750452076,241.71790235081374],[6.509945750452076,242.2603978300181],[6.509945750452076,239.54792043399638],[8.679927667269439,236.29294755877035],[10.307414104882454,235.750452079566],[11.392405063291136,237.92043399638337],[11.392405063291136,240.63291139240508],[10.849909584086802,243.34538878842676],[11.392405063291136,244.9728752260398],[13.019891500904166,245.51537070524412],[16.274864376130196,243.34538878842676],[18.987341772151893,240.09041591320073],[21.157323688969257,239.00542495479206],[24.4122965641953,237.92043399638337],[22.24231464737794,237.92043399638337],[19.52983725135624,239.54792043399638],[18.987341772151893,240.09041591320073],[18.44484629294756,244.43037974683546],[21.157323688969257,245.51537070524412],[24.4122965641953,242.2603978300181],[24.954792043399635,238.4629294755877],[24.954792043399635,237.92043399638337],[24.954792043399635,239.54792043399638],[24.954792043399635,242.2603978300181],[25.497287522603983,244.43037974683546],[27.667269439421332,246.05786618444847],[30.379746835443044,244.43037974683546],[32.54972875226041,241.71790235081374],[34.71971066907777,239.00542495479206],[36.889692585895105,237.92043399638337],[39.602169981916816,238.4629294755877],[40.68716094032551,237.92043399638337],[38.51717902350815,237.37793851717902],[35.26220614828209,239.00542495479206],[34.17721518987342,240.63291139240508],[34.71971066907777,241.71790235081374],[36.347197106690786,242.80289330922244],[39.05967450271247,243.8878842676311],[40.144665461121164,245.51537070524412],[40.144665461121164,247.6853526220615],[39.05967450271247,248.77034358047018],[36.347197106690786,249.85533453887888],[33.634719710669074,250.3978300180832],[29.294755877034362,250.3978300180832],[26.582278481012665,250.94032549728752],[22.784810126582286,250.94032549728752],[18.987341772151893,250.94032549728752],[15.732368896925863,251.4828209764919],[11.392405063291136,251.4828209764919],[7.594936708860757,251.4828209764919],[4.339963833634727,252.0253164556962],[0.5424954792043337,250.94032549728752],[-2.1699819168173633,251.4828209764919],[-5.424954792043394,250.94032549728752],[-8.679927667269439,250.94032549728752],[-11.392405063291136,251.4828209764919],[-14.647377938517181,251.4828209764919],[-17.359855334538878,252.0253164556962],[-19.52983725135624,252.0253164556962],[-21.699819168173605,252.0253164556962],[-23.869801084990954,252.0253164556962],[-26.039783001808317,251.4828209764919],[-27.667269439421332,251.4828209764919],[-29.294755877034362,250.94032549728752],[-30.379746835443044,250.94032549728752],[-32.00723327305606,250.94032549728752],[-33.63471971066908,251.4828209764919],[-34.719710669077756,251.4828209764919],[-35.2622061482821,251.4828209764919],[-35.80470162748644,251.4828209764919],[-35.80470162748644,249.85533453887888],[-35.2622061482821,247.6853526220615],[-34.719710669077756,244.43037974683546],[-33.63471971066908,240.09041591320073],[-33.09222423146474,237.37793851717902],[-32.5497287522604,233.58047016274864],[-32.00723327305606,230.86799276672696],[-30.922242314647377,227.61301989150093],[-30.379746835443044,224.90054249547921],[-29.837251356238696,222.1880650994575],[-29.837251356238696,220.5605786618445],[-29.294755877034362,218.93309222423147],[-29.294755877034362,216.7631103074141]];
var sketchs= [
  {name: "custom", data: []},
  {name: "hello", data : hello}, 
  {name:"love you", data:loveYou}, 
  {name:"happy Birthday", data: happyBirthday}, 
  {name:"happy Bday", data: happyBday},
  {name:"Dad Heart", data: dadHeart},
  {name:"Mum Heart", data: mumHeart},
  {name:"merry Xmas", data: merryXmas}
];
var sketch = [];
var sketchName;
var bicepFollowerArray = [];
var tricepFollowerArray = [];
var pos = { x: 0, y: 0 };//for drawing
var bicepColor = "#45858C";
var tricepColor = "#D92B04";
var camsSVG;


var offset = {x: width/2,y: 10};
var shoulder = new Joint(0,0);

var aB = 3*Math.PI/4; //angle tricep default
var aT = Math.PI/4; //angle bicep default

var tricepFollower = new Joint(d*Math.cos(aT), d*Math.sin(aT));
var bicepFollower = new Joint(d*Math.cos(aB), d*Math.sin(aB));//is the arm of elbowL
var elbow = new Joint((tricepFollower.x)*L/d,tricepFollower.y*L/d);
var elbowL = new Joint((bicepFollower.x)*L/d,bicepFollower.y*L/d);
var pencil = new Joint((tricepFollower.x+bicepFollower.x)*L/d,(tricepFollower.y + bicepFollower.y)*L/d);
//var forearm = new Joint(elbow.x+bicepFollower.x,elbow.y + bicepFollower.y);


var joints = [shoulder, tricepFollower, bicepFollower, elbow, elbowL, pencil];

function Joint(x,y){
  this.x = x;
  this.y = y;
}
/*
var log = document.createElement("span");
document.body.append(log);
log.innerHTML = "log";
*/
var canvasDiv = document.getElementById("canvasDiv");
//var canvasDiv = document.createElement("div");
//canvasDiv.id = "canvasDiv";
canvasDiv.style.fontSize = camRMax/10*scaler +"px";
var canvas = document.createElement("canvas");
canvas.id = "canvas";
var ctx = canvas.getContext("2d");
canvas.width = width*scaler;
canvas.height = height*scaler;
//document.body.append(canvasDiv);
canvasDiv.append(canvas);
//canvas.style.border = "2px solid black";
var cRect = canvas.getBoundingClientRect(); 
var a=2;


draw();
play();
window.onload = function() {
  clear();
  sketch = sketchs[1].data;
  sketchName = sketchs[1].name;
  //sketch = hello;//loveYou;
  loadFromSketchArray();
  makeBuyOptions();
  
  document.getElementById("buyOptionsDiv").style.height = height*scaler + "px";
  //document.getElementById("slideShowDiv").style.height = height*scaler + "px";
  
  
}; 





function calcJointsFromFollowers(){
  [tricepFollower.x, tricepFollower.y] = [tricepFollowerArray[frame][0],tricepFollowerArray[frame][1]];
  [bicepFollower.x, bicepFollower.y] = [bicepFollowerArray[frame][0],bicepFollowerArray[frame][1]];
  [elbow.x,elbow.y] = [tricepFollower.x*L/d,tricepFollower.y*L/d];
  [elbowL.x,elbowL.y] = [bicepFollower.x*L/d,bicepFollower.y*L/d];
  [pencil.x, pencil.y] = [(tricepFollower.x+bicepFollower.x)*L/d,(tricepFollower.y + bicepFollower.y)*L/d];
 // [forearm.x, forearm.y] = [elbow.x+bicepFollower.x,elbow.y + bicepFollower.y];
}

function calcJointsFromPencil(){
  
  //the next few lines are to find the elbow position
  var hx = pencil.x/2;
  var hy = pencil.y/2;
  var slope = Math.atan(-hx/hy);
  var lh = Math.sqrt(Math.pow(hx,2) + Math.pow(hy,2)); //length of h
  var db = Math.sqrt(Math.pow(L,2) - Math.pow(lh,2));   // distance when bisecctor touches tricep arc
  [elbow.x,elbow.y] = [hx + db*Math.cos(slope),hy+db*Math.sin(slope)];
  [elbowL.x,elbowL.y] = [hx - db*Math.cos(slope),hy - db*Math.sin(slope)];
  
  [tricepFollower.x, tricepFollower.y] = [elbow.x*d/L, elbow.y*d/L];
  [bicepFollower.x, bicepFollower.y] = [elbowL.x*d/L, elbowL.y*d/L];
 // [forearm.x, forearm.y] = [d/L*(pencil.x - elbow.x) + elbow.x, d/L*(pencil.y - elbow.y) + elbow.y]; 
  //[bicepFollower.x, bicepFollower.y] = [forearm.x - elbow.x, forearm.y - elbow.y]; 
    
}







function loadFromSketchArray(){
  //cancelAnimationFrame(animationPlayer);
  bicepFollowerArray = [];
  tricepFollowerArray = [];
  for(var i = 0; i < sketch.length; i++){
    pencil.x = sketch[i][0];
    pencil.y = sketch[i][1];
    calcJointsFromPencil();
    bicepFollowerArray.push([bicepFollower.x, bicepFollower.y]);
    tricepFollowerArray.push([tricepFollower.x, tricepFollower.y]);
  }
  //inc = Math.PI*2/sketch.length;
  generateCams();
 
}

function draw(){
  //background
 // ctx.fillStyle = "#A0D9D9";
  //ctx.fillRect(0,0,width*scaler, height*scaler);
  
  
  //page
  ctx.lineWidth = 4; 
  ctx.fillStyle = "white";
  ctx.strokeStyle = "black";
  ctx.beginPath();
  ctx.arc((pageCX + offset.x)*scaler, (pageCY + offset.y)*scaler, pageR*scaler, 0, 2 * Math.PI);
  ctx.stroke();

  ctx.fill();
  
  
  //levers
  ctx.lineWidth = 15*scaler;
  ctx.lineCap = 'round';
  ctx.strokeStyle = '#BF9765';
  
  ctx.beginPath();
  ctx.moveTo((shoulder.x + offset.x)*scaler, (shoulder.y+ offset.y)*scaler);
  ctx.lineTo((elbow.x + offset.x)*scaler, (elbow.y+offset.y)*scaler);
  ctx.stroke();
  
  ctx.beginPath();
  ctx.moveTo((shoulder.x + offset.x)*scaler, (shoulder.y+ offset.y)*scaler);
  ctx.lineTo((elbowL.x + offset.x)*scaler, (elbowL.y+offset.y)*scaler);
  ctx.stroke();
  
 /* ctx.beginPath();
  ctx.moveTo((shoulder.x + offset.x)*scaler, (shoulder.y+ offset.y)*scaler);
  ctx.lineTo((bicepFollower.x + offset.x)*scaler, (bicepFollower.y+ offset.y)*scaler);
  ctx.stroke();*/
  
  ctx.beginPath();
  ctx.moveTo((pencil.x + offset.x)*scaler, (pencil.y+ offset.y)*scaler);
  ctx.lineTo((elbow.x + offset.x)*scaler, (elbow.y+offset.y)*scaler);
  ctx.stroke();
  
  ctx.beginPath();
  ctx.moveTo((pencil.x + offset.x)*scaler, (pencil.y+ offset.y)*scaler);
  ctx.lineTo((elbowL.x + offset.x)*scaler, (elbowL.y+offset.y)*scaler);
  ctx.stroke();
  
 /* ctx.beginPath();
  ctx.moveTo((bicepFollower.x + offset.x)*scaler, (bicepFollower.y+ offset.y)*scaler);
  ctx.lineTo((forearm.x + offset.x)*scaler, (forearm.y+offset.y)*scaler);
  ctx.stroke();*/
  
  //joints
  for(var i = 0; i< joints.length; i++){
    ctx.beginPath();
    ctx.arc((joints[i].x + offset.x)*scaler, (joints[i].y + offset.y)*scaler, screw/2*scaler, 0, 2 * Math.PI);
    ctx.fillStyle = 'white';
    ctx.fill();
  }
  
  
  
  //cam center
  /*ctx.beginPath();
  ctx.arc((camCX + offset.x)*scaler, (camCY + offset.y)*scaler, screw/2*scaler, 0, 2 * Math.PI);
  ctx.lineWidth = 2;
  ctx.stroke();*/
  
 
  
  

 var rad = frame *inc;//rotation point of cam 

 for(var i = 0; i< sketch.length; i++){
   //draw sketch
   var next = i+1;
   if(next === sketch.length){next = 0;}
    ctx.beginPath(); // begin
    ctx.lineWidth = 1;
    ctx.lineCap = 'round';
    ctx.strokeStyle = '#D92B04';
    ctx.moveTo((sketch[i][0] + offset.x)*scaler, (sketch[i][1] + offset.y)*scaler); // from
    //pos.x = mouseX;
    //pos.y = mouseY;
    ctx.lineTo((sketch[next][0] + offset.x)*scaler, (sketch[next][1] + offset.y)*scaler);//to
   if(i<frame){
     ctx.stroke(); // draw it!
   }
    
   
    //cams
   if(bicepCamCoords.length >0){
     ctx.lineWidth = 2;
      ctx.strokeStyle = bicepColor;
      ctx.fillStyle = "#D9C589";
      ctx.beginPath();
      var rotatedCamPoint = rotate(bicepCamCoords[i][0],bicepCamCoords[i][1],camCX,camCY, rad);
      var rotatedCamPointNext = rotate(bicepCamCoords[next][0],bicepCamCoords[next][1],camCX,camCY, rad);
      ctx.moveTo((rotatedCamPoint[0] + offset.x)*scaler, (rotatedCamPoint[1]+ offset.y)*scaler);
      ctx.lineTo((rotatedCamPointNext[0] + offset.x)*scaler, (rotatedCamPointNext[1]+ offset.y)*scaler);
      ctx.stroke();
    
      ctx.strokeStyle = tricepColor;
      ctx.fillStyle = "#D9C589";
      ctx.beginPath();
      var rotatedCamPoint = rotate(tricepCamCoords[i][0],tricepCamCoords[i][1],camCX,camCY, rad);
      var rotatedCamPointNext = rotate(tricepCamCoords[next][0],tricepCamCoords[next][1],camCX,camCY, rad);
      ctx.moveTo((rotatedCamPoint[0] + offset.x)*scaler, (rotatedCamPoint[1]+ offset.y)*scaler);
      ctx.lineTo((rotatedCamPointNext[0] + offset.x)*scaler, (rotatedCamPointNext[1]+ offset.y)*scaler);      
      ctx.stroke();
   
   }
   
   
 } 
 frame++;
 if(frame === sketch.length){frame = 0;}  
  
}

var startTime = Date.now();
var lastPlay = startTime;
var animationPlayer = null;

function play(){
  if(Date.now() - lastPlay > 100){
    ctx.clearRect(0,0,canvas.width, canvas.height);
    //calcJoints();
    if(playing === false){
      addTosketch();// only will if reccoding conditions met
    }
    else{
      calcJointsFromFollowers();
     // frame++;
     // if(frame === sketch.length){frame = 0;}
    }
    //calcJointsFromPencil();
    draw();
    lastPlay = Date.now();
  }

  animationPlayer = requestAnimationFrame(play);
}


var penOn = false;
var mouseX = 0, mouseY = 0;

canvas.addEventListener("mousemove", function(e){
                          mouseX = (e.clientX - cRect.left)/scaler - offset.x;
                          mouseY = (e.clientY - cRect.top + window.scrollY)/scaler - offset.y;
                          //log.innerHTML =mouseX;
                          })
canvas.addEventListener("mousedown", function(e){
                          penOn = true;
 
                          })

canvas.addEventListener("mouseup", function(e){
                          penOn = false;
                          })


canvas.addEventListener("touchmove", function (e) {
  event.preventDefault();
  var touch = e.touches[0];
  var mouseEvent = new MouseEvent("mousemove", {
    clientX: touch.clientX,
    clientY: touch.clientY
  });
  canvas.dispatchEvent(mouseEvent);
}, false);


canvas.addEventListener("touchstart", function (e) {
  event.preventDefault();
  var mouseEvent = new MouseEvent("mousedown", {

  });
  canvas.dispatchEvent(mouseEvent);
}, false);


canvas.addEventListener("touchend", function (e) {
  event.preventDefault();
  var mouseEvent = new MouseEvent("mouseup", {

  });
  canvas.dispatchEvent(mouseEvent);
}, false);

//buttons------------------------------------------------------
var buttonSize = camRMax/10;
var buttonDiv = document.createElement("div");
buttonDiv.id = "buttonDiv";
buttonDiv.style.fontSize = buttonSize*scaler +"px";
canvasDiv.append(buttonDiv);
var buttonDivWidth = width;

buttonDiv.style.width = buttonDivWidth*scaler + "px";
//buttonDiv.style.left = (width/2 - buttonDivWidth/2) *scaler + "px";
buttonDiv.style.top = (pageCY - pageR - buttonSize*2.1 + offset.y)*scaler + "px";

var clearButton = document.createElement("button");
buttonDiv.append(clearButton);
clearButton.style.fontSize = buttonSize*scaler +"px";
clearButton.innerHTML = "clear";
clearButton.onclick = function() {
  sketchSelect.selectedIndex = 0;
  sketchSelect.dispatchEvent(new Event('change'));
  clearCustom();
  clear();
}





function clear(){
  //frame = 0;
  sketch = [];
  inputTxt.value = null;
  bicepFollowerArray = [];
  tricepFollowerArray = [];
  bicepCamCoords = [];
  tricepCamCoords = [];
  playing = false;
}

function clearCustom(){
  sketchs[0].data = [];
}


var playing = false;
var frame = 0;
var playButton = document.createElement("button");
buttonDiv.append(playButton);
playButton.innerHTML = "play";
playButton.style.fontSize = buttonSize*scaler +"px";
playButton.onclick = function() {
  sketchs[0].data = sketch; //save to custom
  generateCams();
}


function generateCams(){
    if(sketch.length>0){
      playing = true;
      frame = 0;
      calcCams();
  }
}



var downloadButton = document.createElement("button");
buttonDiv.append(downloadButton);
downloadButton.innerHTML = "save";
downloadButton.style.fontSize = buttonSize*scaler +"px";
downloadButton.onclick = function() {
  if(playing === true){
    if (confirm("Download 3 files \n cams.svg : for laser cutter \n cams.jpeg : for scroll saw \n sketch_coordinates.txt : to upload and replay your sketch")  == true) {
      saveTxt("sketch_coordinates");
      saveSvg(camsSVG, "cams");
      saveJpeg(camsSVG, "cams");
    } 
    else {
 
    }
    
  } 
}


var sketchSelect = document.createElement("select");
buttonDiv.append(sketchSelect);
sketchSelect.style.fontSize = buttonSize*scaler +"px";
for(var i =0; i< sketchs.length; i++){
  var option = document.createElement("option");
  option.text = sketchs[i].name;
  sketchSelect.add(option);
  sketchSelect.selectedIndex = 1;
}
sketchSelect.onchange = function(e){
  clear();
  sketch = sketchs[e.target.selectedIndex].data;
  sketchName = sketchs[e.target.selectedIndex].name;
  loadFromSketchArray();
  makeBuyOptions();
}




function loadTxt(file){
  var fileReader = new FileReader();
  fileReader.onload = function(fileLoadedEvent){
    var textFromFileLoaded = fileLoadedEvent.target.result;
    clear();
    sketch = JSON.parse(textFromFileLoaded);
    loadFromSketchArray();
    sketchSelect.selectedIndex = 0;
    sketchName = sketchs[0].name;
    sketchs[0].data = sketch; //save to custom
    makeBuyOptions();
  };

  fileReader.readAsText(file, "UTF-8");
}

var inputTxt=document.createElement('input');
inputTxt.id = "inputTxt";
inputTxt.type="file";
canvasDiv.append(inputTxt);
inputTxt.style.top = (height)*scaler -20 +"px";//width/2*scaler + "px";
inputTxt.style.left = "5px";
inputTxt.oninput = () => {
  var selectedFile = inputTxt.files[0];
  loadTxt(selectedFile);
}



var helpButton = document.createElement("button");
canvasDiv.append(helpButton);
helpButton.id = "helpButton";
helpButton.style.top = "5px";
helpButton.style.left = "5px";
helpButton.innerHTML = "help";
helpButton.onclick = function() {
  alert("- clear: Clears the current sketch\n"+
        "- Click and drag within the circle to form a one line sketch\n"+
        "- play: Generates cams for your sketch\n"+
        "- save: Downloads the cam profiles and the sketch coordinates\n"+
        "- choose file: Loads a previousely saved sketch txt file\n\n"+
        "TIPS\nMove slowly to get a smooth sketch\nUse a touch screen with a stylus for more accuracy\nAt the end of your sketch drag a path slowly back to the starting point\nAvoid steep jumps in your cam profiles\n\n"+
       "for any questions please contact shasabolton@gmail.com");
}



var shopDiv = document.createElement("div");
canvasDiv.append(shopDiv);
var image = document.createElement("img");
image.id = "image";
image.src = "https://cdn.glitch.global/71b232b6-8a22-4706-b0a0-7de978a8643c/low-iso-alphad-521px.png?v=1652315608755";
shopDiv.append(image);


shopDiv.style.fontSize = camRMax/10*scaler +"px";
var imageWidth = camRMax;
image.width = camRMax*scaler;
shopDiv.style.position = "absolute";
shopDiv.style.width = width*scaler +"px";
//imageLink.style.left = (camCX - imageWidth/2 + offset.x)*scaler +"px";
shopDiv.style.top = (camCY - imageWidth/2 +offset.y - camRMax/4)*scaler + "px";


shopDiv.innerHTML += "<br>";
var title = document.createElement("span");
title.innerHTML = "Lanky Doodler";
title.style.fontSize = camRMax/8*scaler +"px";
title.id = "name";
shopDiv.append(title);


shopDiv.innerHTML += "<br>";
var description = document.createElement("span");
description.innerHTML = "writing/drawing automaton";
description.style.fontSize = camRMax/10*scaler +"px";
description.id = "description";
shopDiv.append(description);

shopDiv.innerHTML += "<br>";
var buyButton = document.createElement("button");
buyButton.innerHTML = "buy";
buyButton.style.fontSize = camRMax/10*scaler +"px";
buyButton.id = "buy";
shopDiv.append(buyButton);
buyButton.onclick = function(){
document.getElementById("buyOptionsDiv").style.display = "block";
}

/*
var infoButton = document.createElement("button");
shopDiv.append(infoButton);
infoButton.innerHTML = "info";
infoButton.addEventListener('click',function(e){document.getElementById("slideShowDiv").style.display = "block"});
*/
shopDiv.style.textAlign = "center";










function addTosketch(){
  var rec = false;
        //console.log(Math.floor(mouseY), "pageCY:",pageCY);
  if(Math.pow(mouseX - pageCX,2) + Math.pow(mouseY - pageCY,2) < Math.pow(pageR,2) && penOn === true){ 
       [pencil.x, pencil.y] = [mouseX, mouseY];//move pencil to mouse
      //if sketch oint is diferent from last point
      if(sketch.length > 0){
        if(sketch[sketch.length-1][0] != pencil.x || sketch[sketch.length-1][1] != pencil.y){
          rec = true;
            
        }  
      }
    else{
      rec = true;
    }          
 }
  
  if(rec === true){   
    sketch.push([pencil.x, pencil.y]);//add pencil to sketch
    calcJointsFromPencil();
    bicepFollowerArray.push([bicepFollower.x, bicepFollower.y]);
    tricepFollowerArray.push([tricepFollower.x, tricepFollower.y]);
  }
  
  
}



var tricepCamCoords = [];//usual (zero,zero) at top pivot
var bicepCamCoords = [];
var inc


function calcCams(){
  inc = Math.PI*2/sketch.length;
  var bicepPathHTML = '<path id = "bicepCamPath" d = "';
  var tricepPathHTML = '<path id = "tricepCamPath" d = "';
 
  
  for(var i = 0; i<sketch.length; i++){
    var rad = i*inc;
    var bicepXY = screwDiam(rotate(bicepFollowerArray[i][0],bicepFollowerArray[i][1],camCX,camCY, -rad));
    var tricepXY = screwDiam(rotate(tricepFollowerArray[i][0],tricepFollowerArray[i][1],camCX,camCY, -rad));
    bicepCamCoords.push(bicepXY);
    tricepCamCoords.push(tricepXY);
    
    //bicepXY[0]+=offset.x;
    //bicepXY[1]+=offset.y;
    if(i === 0){ bicepPathHTML+= 'M '; tricepPathHTML+= 'M ';}
    else{ bicepPathHTML+= ' L '; tricepPathHTML+= ' L ';}
    bicepPathHTML += (bicepXY[0]  - camCX + camRMax)  + ' ' + (bicepXY[1] - camCY + camRMax);
    tricepPathHTML += (tricepXY[0]  - camCX + camRMax + camRMax +20)  + ' ' + (tricepXY[1]  - camCY + camRMax);
    if(i === sketch.length - 1){bicepPathHTML+= 'z '; tricepPathHTML+= 'z ';}
   
    
  }
  var strokeWidth = 0.3;
  
  bicepPathHTML += '" fill="transparent" stroke="'+ bicepColor + '" stroke-width="' +strokeWidth+'" />';
  tricepPathHTML += '" fill="transparent" stroke="'+ tricepColor + '" stroke-width="' +strokeWidth+'" />';
  
  //cam joining screw holes
  //bicepPathHTML += '<circle cx="'+ (camCX + offset.x) + '" cy="' + (camCY + offset.y) +'" r="' + screw/2 +'" fill="transparent" stroke="' + bicepColor +'"/>'; 
  bicepPathHTML += '<circle cx="'+ (camCX  - camCX + camRMax +7) + '" cy="' + (camCY  - camCY + camRMax - 7) +'" r="' + 2 +'" fill="transparent" stroke="' + bicepColor + '" stroke-width="' +strokeWidth+'" />';
  tricepPathHTML += '<circle cx="'+ (camCX - camCX + camRMax +7 + camRMax +20) + '" cy="' + (camCY  - camCY + camRMax - 7) +'" r="' + 2.6 +'" fill="transparent" stroke="' + tricepColor + '" stroke-width="' +strokeWidth+'" />';

  //center cross
  var crossWidth = 19;
  bicepPathHTML += '<rect x="' +  (camCX -crossWidth/2 - camCX + camRMax) +'" y="'+ (camCY -1.5  - camCY + camRMax) +'" width="'+crossWidth+'" height="'+3+'" fill="transparent" stroke="' + bicepColor + '" stroke-width="' +strokeWidth+'" />'; 
  bicepPathHTML += '<rect x="' +  (camCX -1.5  - camCX + camRMax) +'" y="'+ (camCY -crossWidth/2 - camCY + camRMax) +'" width="'+3+'" height="'+crossWidth+'" fill="transparent" stroke="' + bicepColor + '" stroke-width="' +strokeWidth+'" />';   
  tricepPathHTML += '<rect x="' +  (camCX -crossWidth/2  - camCX + camRMax + camRMax +20) +'" y="'+ (camCY -1.5  - camCY + camRMax) +'" width="'+crossWidth+'" height="'+3+'" fill="transparent" stroke="' + tricepColor + '" stroke-width="' +strokeWidth+'" />'; 
  tricepPathHTML += '<rect x="' +  (camCX -1.5  - camCX + camRMax + camRMax + 20) +'" y="'+ (camCY -crossWidth/2  - camCY + camRMax) +'" width="'+3+'" height="'+crossWidth+'" fill="transparent" stroke="' + tricepColor + '" stroke-width="' +strokeWidth+'" />';
  
  //labels
  bicepPathHTML += '<text x="' + (camCX  - camCX + camRMax - 5) +'" y="' + (camCY + - crossWidth - camCY + camRMax) + '" style="font: bold 20px sans-serif;" '+' fill="transparent" stroke="' + bicepColor + '" stroke-width="' +strokeWidth+'">b</text>';
  tricepPathHTML += '<text x="' + (camCX  - camCX + camRMax - 5 +camRMax +20) +'" y="' + (camCY + - crossWidth  - camCY + camRMax) + '" style="font: bold 20px sans-serif;" '+' fill="transparent" stroke="' + tricepColor + '" stroke-width="' +strokeWidth+'">t</text>'
 
  
  
  
  if(camsSVG === undefined){
     camsSVG = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
     camsSVG.setAttribute("xmlns","http://www.w3.org/2000/svg");
     camsSVG.id = "camsSVG";
     //document.body.append(camsSVG);
     camsSVG.setAttribute("height", "210px");
     camsSVG.setAttribute("width", "297px");
     
  } 
  camsSVG.innerHTML = bicepPathHTML + tricepPathHTML;
  
}


function saveSvg(svgEl, name) {
    svgEl.setAttribute("xmlns", "http://www.w3.org/2000/svg");
    var svgData = svgEl.outerHTML;
    var preface = '<?xml version="1.0" standalone="no"?>\r\n';
    var svgBlob = new Blob([preface, svgData], {type:"image/svg+xml;charset=utf-8"});
    var svgUrl = URL.createObjectURL(svgBlob);
    var downloadLink = document.createElement("a");
    downloadLink.href = svgUrl;
    downloadLink.download = name;
    document.body.appendChild(downloadLink);
    downloadLink.click();
    document.body.removeChild(downloadLink);
}


function saveTxt(name) {
    //svgEl.setAttribute("xmlns", "http://www.w3.org/2000/svg");
    //var svgData = svgEl.outerHTML;
    //var preface = '<?xml version="1.0" standalone="no"?>\r\n';
    var txt = JSON.stringify(sketch); 
    var blob = new Blob([txt], { type: "text/plain;charset=utf-8" });
    var txtUrl = URL.createObjectURL(blob);
    var downloadLink = document.createElement("a");
    downloadLink.href = txtUrl;
    downloadLink.download = name;
    document.body.appendChild(downloadLink);
    downloadLink.click();
    document.body.removeChild(downloadLink);
}


















function saveJpeg(svg, name) {
  var dpmm = 3.78;
  var origHTML = svg.innerHTML; //make a copy 
  //add white backgound
  svg.innerHTML = '<rect width="100%" height="100%" fill="white"/>' + svg.innerHTML;
  const tempCanvas = document.createElement("canvas");
  const base64doc = btoa(unescape(encodeURIComponent(svg.outerHTML)));
  const w = dpmm * parseInt(svg.getAttribute('width')); //multiply by dots per mm to get total pixel width
  const h = dpmm * parseInt(svg.getAttribute('height'));
  const img_to_download = document.createElement('img');
  img_to_download.src = 'data:image/svg+xml;base64,' + base64doc;
  console.log(w, h);
  img_to_download.onload = function () {
    console.log('img loaded');
    tempCanvas.setAttribute('width', w);
    tempCanvas.setAttribute('height', h);
    const context = tempCanvas.getContext("2d");
    //context.clearRect(0, 0, w, h);
    context.drawImage(img_to_download,0,0,w,h);
    const dataURL = tempCanvas.toDataURL('image/jpeg',1);
    if (window.navigator.msSaveBlob) {
      window.navigator.msSaveBlob(tempCanvas.msToBlob(), name);
      //e.preventDefault();
    } else {
      const a = document.createElement('a');
      const my_evt = new MouseEvent('click');
      a.download = name;
      a.href = dataURL;
      a.dispatchEvent(my_evt);
    }
    //canvas.parentNode.removeChild(canvas);
  }  
  //restore version without white background box
  svg.innerHTML = origHTML;
}
















//adjust cam pos accounting for screw diameter 
function screwDiam([x,y]){
  var l = Math.sqrt(Math.pow(x - camCX ,2) + Math.pow(y-camCY ,2));
     x -= screw/2*(x - camCX)/l;
     y -= screw/2*(y - camCY)/l;
  return[x,y];
  
}


function rotate(x,y,cx,cy, rad){
    //move so rot point is at origin
    x = x-cx;
    y = y - cy;
    //rotate about origin
    var xrot = x*Math.cos(rad) - y*Math.sin(rad);
    var yrot = y*Math.cos(rad) + x*Math.sin(rad);
    //move back
    x = xrot + cx;
    y = yrot + cy;
    return [x,y];
}


function makeBuyOptions(){
  var kitWithCams = document.getElementById("kitWithCams");
  kitWithCams.innerHTML = "kit with '" + sketchName + "' cams";
  var price = prices["kitWithCams"];
   if(sketchName === "custom"){
      price += 10;
   }
  kitWithCams.innerHTML +=" $"+price;
  
  var camsOnly = document.getElementById("camsOnly");
  camsOnly.innerHTML = "'"+ sketchName + "'" + " cams only";
  price = prices["camsOnly"];
   if(sketchName === "custom"){
      price += 10;
   }
  camsOnly.innerHTML +=" $"+price;
  
  
  
  var assembledWithCams = document.getElementById("assembledWithCams");
  assembledWithCams.innerHTML = "assembled with '" + sketchName + "' cams";
  price = prices["assembledWithCams"];
   if(sketchName === "custom"){
      price += 10;
   }
  assembledWithCams.innerHTML +=" $"+price;
}


function addToCart(button){
  if(sketchName === "custom" && playing === false){
    alert("click 'play' to confirm your sketch is not empty before purchasing");
}
   if(country === "none selected"){
    alert("select country for shipping");
}
  else{
    var paypalForm = document.getElementById("paypalForm");
    var price = prices[button.id];
    document.getElementById("itemName").value = button.innerHTML;
  
    if(sketchName === "custom"){
      price += 10;
      document.getElementById("sketchDataInput").value = JSON.stringify(sketch);
      var camId = Math.floor(Math.random() * 100000);
      document.getElementById("itemName").value += " id " + camId;
      document.getElementById("sketchId").value = "" + camId;
      document.getElementById("customForm").submit();
  }
    
  document.getElementById("amount").value = "" + price;  
  paypalForm.submit();

  }

}


function hideBuyOptions(){
  document.getElementById("buyOptionsDiv").style.display = "none";
}


var slideIndex = 0;
var slideURLs = [
  "https://lh3.googleusercontent.com/pw/AM-JKLWhnhcIgIYKzqQP7F5cNRrwytDShIZoEQMHWGXGOuSB8-VCmFxpGaO531E1SF85JueQttu8rRYkkb44syJY1k7JVDrRZ0yHLYzJUO_XTkASPjY82ZJji9e6FC1rYSjItdtclcVinBf60lskmGOI0JWz=s625-no?authuser=0",
  "https://lh3.googleusercontent.com/pw/AM-JKLWMpRSX2VSAyKgOpD0c5iyZ8XXqHCoT4lq2pZDNAQkuEzYcsyWBhXLJAO0pog9ltEYXTDcwczWhTsHVYmBjChnMGwN6HPXHtlKC50-luhOjLH6PpKLjN9X2I4TTlttn8WD9VwvMGgxPdHsLNFH3TFW_=s625-no?authuser=0",
  "https://lh3.googleusercontent.com/pw/AM-JKLUPQtmTppqRBuB7D2i1azv1CEcbmsH17xh4nW1sl51RIlxVjWuW69-k-OUxZxadJKKuihylgQSaf-z-Qmbf647BImDNqenRjZCi73gel4CuKvJSdtFUWOQoNogiuiVsS6NOn8NtT4hDDedgF7FucdPS=s625-no?authuser=0",
  "https://lh3.googleusercontent.com/pw/AM-JKLVaswbCDxjRy3q-dIJtfDqLsr4YuQ9e-x-aFCNEiFyFj8ralzdyKz3JZv30GSF9VCKPULZwCVs8bv1nl1hAG6sb8RN14vDkKeGkMnjIdW-nmdrYl_lsNl90c6A5TLdVauy0GX2nRa78A2oorNeRgVmj=s625-no?authuser=0",
  "https://lh3.googleusercontent.com/pw/AM-JKLVlSUq8Sy6KJhqet1SlwzKfI8ky34IZHbaoaqBtVP2gM9cMePLEoMGc0aY2D_f_In3n3ZFBlKK8O62hWkysExE98CQuw8Rhp6_jrirTJZo0NP9Ye1ySz1JxmWx3GWw--v46Xm00jT_z_ihvHJ24Qs5h=s625-no?authuser=0",
];

function nextSlide(){
  slideIndex++;
  if(slideIndex === slideURLs.length){slideIndex = 0;}
  document.getElementById("slide").src = slideURLs[slideIndex];
}

function prevSlide(){
  slideIndex--;
  if(slideIndex <0 ){slideIndex = slideURLs.length-1;}
  document.getElementById("slide").src = slideURLs[slideIndex];
}

function hideSlideShow(){
  document.getElementById("slideShowDiv").style.display = "none";
}



function setCountry(select){
  country = select.value;
  document.getElementById("shippingInput").value = shippingCosts[country];
}